<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Chat+</title>
  <link rel="stylesheet" href="styles2.css" />
</head>
<body>

  <header class="topbar">
    <div class="brand">Simple Chat+</div>
    <div class="spacer"></div>
    <button id="edit-profile-btn" class="btn ghost">Profile</button>
  </header>

  <!-- Auth -->
  <section id="auth-panel" class="card center">
    <h2>Enter your username</h2>
    <p style="font-size:13px;color:#666;margin-top:-4px;">
      Username is <b>unique</b>, case-insensitive, and cannot be changed later.
    </p>
    <input id="username-input" placeholder="Username" />
    <button id="join-btn" class="btn" style="margin-top:10px;">Join</button>
  </section>

  <!-- App -->
  <main id="app" class="app" style="display:none;">

    <aside class="sidebar">
      <div class="section-title">Channels</div>
      <ul id="channels-list" class="list"></ul>

      <div style="display:flex;gap:8px;margin-top:8px;">
        <button id="add-channel-btn" class="btn ghost">+ Channel</button>
        <button id="delete-channel-btn" class="btn danger" style="display:none;">Delete</button>
      </div>

      <div class="section-title" style="margin-top:14px;">Direct Messages</div>
      <ul id="dm-list" class="list"></ul>
      <button id="new-dm-btn" class="btn ghost" style="margin-top:6px;">+ DM</button>

      <div class="section-title" style="margin-top:14px;">Theme</div>
      <button id="theme-btn" class="btn ghost" style="display:none;">Edit Theme</button>

      <div class="section-title" style="margin-top:14px;">
        Online in <span id="room-name-label">#general</span>
      </div>
      <ul id="users-list" class="users"></ul>
    </aside>

    <section class="chat-area">
      <div class="chat-header">
        <div class="room-pill"><span id="room-pill-prefix">#</span> <span id="room-pill-name">general</span></div>
        <div id="typing-indicator" class="typing" style="display:none;">Someone is typing…</div>
      </div>

      <div id="messages" class="messages"></div>

      <div class="composer">
        <button id="gif-btn" class="btn ghost">GIF</button>
        <button id="img-btn" class="btn ghost">IMG</button>
        <input id="image-upload" type="file" accept="image/*" style="display:none;" />
        <input id="user-input" placeholder="Write a message…" autocomplete="off" />
        <button id="send-btn" class="btn primary">Send</button>
      </div>
    </section>

  </main>

  <!-- Profile modal -->
  <dialog id="profile-modal" class="modal">
    <form id="profile-form" class="modal-card">
      <h3>Your Profile</h3>

      <label>Username</label>
      <input id="profile-username" disabled />

      <label>Bubble Color</label>
      <input id="profile-color" type="color" />

      <label>Avatar</label>
      <div class="avatar-row">
        <img id="profile-preview" class="avatar preview" />
        <input id="profile-file" type="file" accept="image/*" />
      </div>

      <div class="row-right">
        <button id="profile-cancel" type="button" class="btn ghost">Cancel</button>
        <button id="profile-save" type="submit" class="btn primary">Save</button>
      </div>
    </form>
  </dialog>

  <!-- GIF modal -->
  <dialog id="gif-modal" class="modal">
    <div class="modal-card">
      <h3>GIFs</h3>
      <div style="display:flex;gap:8px;">
        <input id="gif-search" placeholder="Search GIFs…" />
        <button id="gif-search-btn" class="btn">Search</button>
      </div>
      <div id="gif-grid" class="gif-grid"></div>
      <div class="row-right"><button id="gif-close" class="btn ghost">Close</button></div>
    </div>
  </dialog>

  <!-- Theme modal -->
  <dialog id="theme-modal" class="modal">
    <div class="modal-card">
      <h3>Channel Theme</h3>
      <label>Background Color</label>
      <input id="theme-color" type="color" />

      <label>Background Image</label>
      <div style="display:flex;gap:8px;align-items:center;">
        <button id="upload-bg-btn" class="btn ghost">Upload</button>
        <input id="theme-image" type="file" accept="image/*" style="display:none;" />
      </div>

      <div class="row-right" style="margin-top:10px;">
        <button id="theme-close" class="btn ghost">Cancel</button>
        <button id="theme-save" class="btn primary">Save</button>
      </div>
    </div>
  </dialog>

  <script type="module" src="chat.js?v=discord-like-1"></script>
</body>
</html>
